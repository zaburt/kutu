%fieldset
  %legend
    = t('games')

  - if false
    .row
      %ul.small-block-grid-1.medium-block-grid-3
        %li
          .small-8.columns
            %label.right.inline{:for => 'gameselector_city'}
              = t('activerecord.attributes.game.city')
          .small-16.columns
            = select_tag 'gameselector_city', options_for_select([t('all')] + @cities)
        %li
          .small-8.columns
            %label.right.inline{:for => 'gameselector_game_category'}
              = t('activerecord.attributes.game.game_category')
          .small-16.columns
            = select_tag 'gameselector_game_category', options_for_select([t('all')] + @game_categories)
        %li
          .small-8.columns
            %label.right.inline{:for => 'gameselector_active'}
              = t('activerecord.attributes.game.active')
          .small-16.columns
            = select_tag 'gameselector_active', options_for_select([[t('all'), 'all'], [t('yes'), true], [t('no'), false]])

  - if true
    .row
      .small-centered.text-center
        %a.button.radius.small{:href => 'javascript:void();', 'data-dropdown' => 'dropdown_cities'}
          = "#{t('activerecord.attributes.game.city')}: #{t('all')}"
        %ul#dropdown_cities.small.f-dropdown.text-left{'data-dropdown-content' => ''}
          - ([t('all')] + @cities).each do |city|
            %li
              %a{:href => "javascript:filter_game_list('cities', '#{city}');"}
                = city

        %a.button.radius.small{:href => 'javascript:void();', 'data-dropdown' => 'dropdown_game_categories'}
          = "#{t('activerecord.attributes.game.game_category')}: #{t('all')}"
        %ul#dropdown_game_categories.medium.f-dropdown.text-left{'data-dropdown-content' => ''}
          - ([t('all')] + @game_categories).each do |game_category|
            %li
              %a{:href => "javascript:filter_game_list('game_categories', '#{game_category}');"}
                = game_category

        %a.button.radius.small{:href => 'javascript:void();', 'data-dropdown' => 'dropdown_active'}
          = "#{t('activerecord.attributes.game.active')}: #{t('all')}"
        %ul#dropdown_active.tiny.f-dropdown.text-left{'data-dropdown-content' => ''}
          %li
            %a{:href => "javascript:filter_game_list('active', '#{t('all')}');"}
              = t('all')
          %li
            %a{:href => "javascript:filter_game_list('active', '1');"}
              = fonticon('check', 'green')
          %li
            %a{:href => "javascript:filter_game_list('active', '0');"}
              = fonticon('x', 'red')

  .row
    %table#games_index.kutu_datatables
      %thead
        %tr
          %th
          %th= t('activerecord.attributes.game.name')
          %th
          %th= t('activerecord.attributes.game.active')
          /%th= t('activerecord.attributes.game.address')
          %th= t('activerecord.attributes.game.city')
          %th= t('activerecord.attributes.game.game_category')
          /%th= t('activerecord.attributes.game.house')
          /%th= t('activerecord.attributes.game.phone')
          /%th= t('activerecord.attributes.game.email')
          %th= t('activerecord.attributes.game.website')
          /%th= t('activerecord.attributes.game.facebook')
          /%th= t('activerecord.attributes.game.twitter')
          /%th= t('activerecord.attributes.game.instagram')
          /%th= t('activerecord.attributes.game.lat')
          /%th= t('activerecord.attributes.game.lng')
          /%th= t('activerecord.attributes.game.story')
          /%th= t('activerecord.attributes.game.game_times')
          - if signed_in?
            %th
            %th

      %tbody
        - @games.each do |game|
          %tr
            %td= link_to fonticon('eye'), game, :title => t('show')
            %td= link_to title_for_game(game), game
            %td= game.active ? '1' : '0'
            %td= game.active ? fonticon('check', 'green') : fonticon('x', 'red')
            /%td= game.address
            %td= game.city.try(:name)
            %td= game.game_category.try(:name)
            /%td= game.house.try(:name)
            /%td= game.phone
            /%td= game.email
            %td= game.website ? link_to(game.website, game.website) : ''
            /%td= game.facebook
            /%td= game.twitter
            /%td= game.instagram
            /%td= game.lat
            /%td= game.lng
            /%td= game.story
            /%td= game.game_times
            - if signed_in?
              %td= link_to fonticon('pencil'), edit_game_path(game), :title => t('edit')
              %td= link_to fonticon('x', 'red'), game, :method => :delete, :data => {:confirm => t('are_you_sure')}, :title => t('delete')

%br
- if signed_in?
  = link_to t('generic.new_model', :name => Game.model_name.human), new_game_path, :class => 'button small radius'

:javascript
  var datatables_filter_base = {
    active: {
      label: '#{t('activerecord.attributes.game.active')}',
      default_value: '#{t('all')}',
      current_value: '#{t('all')}',
      data_offset: 2,
      is_bool: true,
      bool_true_display: "#{fonticon('check', 'green text_normal')}",
      bool_false_display: "#{fonticon('x', 'red text_normal')}"
    },
    cities: {
      label: '#{t('activerecord.attributes.game.city')}',
      default_value: '#{t('all')}',
      current_value: '#{t('all')}',
      data_offset: 4
    },
    game_categories: {
      label: '#{t('activerecord.attributes.game.game_category')}',
      default_value: '#{t('all')}',
      current_value: '#{t('all')}',
      data_offset: 5
    }
  };


